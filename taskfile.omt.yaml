version: '3'

tasks:
  update:
    desc: 'Update Oh-My-Taskfiles!'
    cmds:
      - echo "Updating Oh-My-Taskfiles..."
      - |
        CUR_PWD=$PWD
        cd $HOME/.omt
        git fetch
        if [ $(git rev-list --count HEAD..origin/main) -gt 0 ]; then
          echo "Changes since last update:"
          git --no-pager log --oneline --graph --decorate HEAD..origin/main
          git pull
        else
          echo "Already up to date. No changes to pull."
        fi
        cd $CUR_PWD
  changelog:
    desc: Show recent updates (last 10 commits)
    cmds:
      - |
        git --no-pager log -10 --oneline --graph --decorate
 