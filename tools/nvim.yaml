version: '3'

includes:
  LIB: ../lib.yaml
  TOOL: ../models/tool.yaml

tasks:
  default:
    - task: TOOL:default

  configure:windows:
    platforms: [windows]
    internal: true
    silent: true
    cmds:
      - |
        mkdir -p "{{ .CONFIG_DIR_NVIM_WINDOWS }}"
        cp "{{ .DOTFILES_SOURCE }}/nvim/init.lua" "{{ .CONFIG_DIR_NVIM_WINDOWS }}/init.lua"
        echo "✅ nvim config copied successfully"

  install:windows:
    platforms: [windows]
    internal: true
    silent: true
    cmds:
      - task: LIB:scoop:install
        vars:
          APP: neovim

  install:
    desc: "[NVIM] ✨ Install neovim"
    silent: true
    cmds:
      - task: install:windows
        platforms: [windows]
      - task: configure:windows
        platforms: [windows]
