version: '3'

tasks:
  default:
    - task --list --taskfile tools/nvim.yaml

  configure:windows:
    platforms: [windows]
    internal: true
    silent: true
    cmds:
      - |
        mkdir -p "{{ .CONFIG_DIR_NVIM_WINDOWS }}"
        cp "{{ .DOTFILES_SOURCE }}/nvim/init.lua" "{{ .CONFIG_DIR_NVIM_WINDOWS }}/init.lua"
        echo "✅ nvim config copied successfully"

  install:windows:
    platforms: [windows]
    internal: true
    silent: true
    cmds:
      - task: ::scoop:install
        vars:
          APP: neovim

  install:
    desc: "[NVIM] ✨ Install neovim"
    silent: true
    cmds:
      - task: install:windows
        platforms: [windows]
      - task: configure:windows
        platforms: [windows]
