version: '3'

includes:
  LIB: ../lib.yaml
  TOOL: ../models/tool.yaml

tasks:
  default:
    - task: TOOL:default

  install:windows:
    platforms: [windows]
    internal: true
    silent: true
    cmds:
      - task: LIB:scoop:extras-install
        vars:
          APP: azd

  install:linux:
    platforms: [linux]
    internal: true
    silent: true
    cmds:
      - |
        if command -v azd >/dev/null 2>&1; then
          echo "azd cli is already installed."
        else
          curl -fsSL https://aka.ms/install-azd.sh | bash
          echo "azd cli has been installed successfully."
        fi

  install:
    desc: "[AZD] âœ¨ Install azd cli"
    silent: true
    cmds:
      - task: install:windows
        platforms: [windows]
      - task: install:linux
        platforms: [linux]