version: '3'

includes:
  LIB: ../lib.yaml
  TOOL: ../models/tool.yaml

tasks:
  default:
    - task: TOOL:default

  configure:windows:
    platforms: [windows]
    internal: true
    silent: true
    vars:
      HELIX_CONFIG_DIR: "$HOME/AppData/Roaming/helix"
    cmds:
      - |
        if [ ! -d "{{ .HELIX_CONFIG_DIR }}" ]; then
          mkdir -p "{{ .HELIX_CONFIG_DIR }}"
        fi
        cp "dotfiles/helix/config.toml" "{{ .HELIX_CONFIG_DIR }}/config.toml"
        echo "helix config has been configured successfully."

  install:windows:
    platforms: [windows]
    internal: true
    silent: true
    cmds:
      - task: LIB:scoop:install
        vars:
          APP: helix

  install:
    desc: "[HELIX] âœ¨ Install helix"
    silent: true
    cmds:
      - task: install:windows
        platforms: [windows]
      - task: configure:windows
        platforms: [windows]
