version: '3'

vars:
  NVM_VERSION: "0.40.3"
  NODE_VERSION: "20.11.0"

tasks:
  install-nvm:
    desc: "[NODE] Install nvm"
    cmds:
      - |
        if command -v nvm >/dev/null 2>&1; then
          echo "nvm is already installed."
        else
          curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v${NVM_VERSION}/install.sh | bash
          echo "nvm has been installed successfully."
        fi

  install:
    desc: "[NODE] âœ¨ Install node"
    cmds:
      - task: install-nvm
      - |
        nvm install ${NODE_VERSION}
        nvm use ${NODE_VERSION}
        nvm alias default ${NODE_VERSION}