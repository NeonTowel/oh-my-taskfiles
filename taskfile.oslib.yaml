version: '3'

tasks:
  coreutils:install:
    platforms: [windows]
    desc: "[WINDOWS] ✨ Install coreutils"
    cmds:
      - |
        if [ ! -d "$HOME/scoop/apps/coreutils/current" ]; then
          scoop install coreutils
          echo "coreutils has been installed successfully."
        else
          echo "coreutils is already installed."
        fi

  1password:install:
    platforms: [windows]
    desc: "[WINDOWS] ✨ Install 1Password"
    cmds:
      - |
        app=$(winget list "AgileBits.1Password" -e)
        echo "$app"
      - |
        app=$(winget list "AgileBits.1Password" -e)
        case "$app" in
          *"No installed package found matching input criteria."*)
            winget install --id AgileBits.1Password -e --accept-package-agreements --accept-source-agreements
            echo "1Password has been installed successfully."
            ;;
          *)
            echo "1Password is already installed."
            ;;
        esac

  pwsh:install:
    desc: "[WINDOWS] ✨ Install pwsh"
    cmds:
      - |
        if command -v pwsh >/dev/null 2>&1; then
          echo "pwsh is already installed."
        else
          scoop install pwsh
          echo "pwsh has been installed successfully."
        fi
