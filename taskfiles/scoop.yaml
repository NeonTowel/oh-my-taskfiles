version: '3'

includes:
  buckets: 
    internal: true
    taskfile: scoop-buckets.yaml

tasks:
  install:
    platforms: [windows]
    internal: true
    required:
      vars: [ APP ]
    deps: [ ":tools:coreutils:install" ]
    cmds:
      - |
        if ! scoop list | grep -q "{{ .APP }}"; then
          scoop install {{ .APP }}
          if ! [ "{{ .UNATTENDED }}" = "true" ]; then
            {{ .gum_ok }} " âœ… {{ .APP }} has been installed successfully."
          fi
        fi

  neontowel-install:
    platforms: [windows]
    internal: true
    required:
      vars: [ APP ]
    cmds:
      - task: buckets:ensure
        vars: { BUCKET: "neontowel" }
      - task: install
        vars: { APP: "{{ .APP }}" }

  extras-install:
    platforms: [windows]
    internal: true
    required:
      vars: [ APP ]
    cmds:
      - task: buckets:ensure
        vars: { BUCKET: "extras" }
      - task: install
        vars: { APP: "{{ .APP }}" }

  nonportable-install:
    platforms: [windows]
    internal: true
    required:
      vars: [ APP ]
    cmds:
      - task: buckets:ensure
        vars: { BUCKET: "nonportable" }
      - task: install
        vars: { APP: "{{ .APP }}" }

  nerd-fonts-install:
    platforms: [windows]
    internal: true
    required:
      vars: [ APP ]
    cmds:
      - task: buckets:ensure
        vars: { BUCKET: "nerd-fonts" }
      - task: install
        vars: { APP: "{{ .APP }}" }
