version: '3'

includes:
  ssh:
    taskfile: 1password.ssh.yaml
    flatten: true

tasks:
  default:
    - task --list --taskfile apps/1password.yaml

  install:windows:
    internal: true
    platforms: [windows]
    cmds:
      - task: ::winget:install
        vars:
          APP: "AgileBits.1Password"

  cli:install:windows:
    internal: true
    platforms: [windows]
    cmds:
      - task: ::winget:install
        vars:
          APP: "AgileBits.1Password.CLI"

  install:
    desc: "[1PASSWORD] ✨ Install 1Password"
    silent: true
    cmds:
      - task: install:windows

  cli:install:
    desc: "[1PASSWORD] ✨ Install 1Password CLI"
    silent: true
    cmds:
      - task: cli:install:windows
