version: '3'

tasks:
  default:
    - task --list --taskfile apps/cursor.yaml

  configure:
    internal: true
    cmds:
      - |
        if ! command -v cursor >/dev/null 2>&1; then
          echo "cursor cli is not installed, trying to look up the cli binary..."
          CLI_BINARY="$HOME/scoop/apps/cursor/current/resources/app/bin/cursor.cmd"
          if [ ! -f "$CLI_BINARY" ]; then
            echo "ERROR: $CLI_BINARY is not found, exiting..."
            exit 1
          fi
        else
          CLI_BINARY="cursor"
        fi
        $CLI_BINARY --version
      - task: ::ide:configure
        vars:
          IDE: "cursor"

  install:windows:
    platforms: [windows]
    internal: true
    silent: true
    cmds:
      - task: ::winget:install
        vars:
          APP: "cursor"

  install:
    desc: "[CURSOR] âœ¨ Install Cursor AI code editor"
    silent: true
    cmds:
      - task: install:windows
        platforms: [windows]
      - task: configure