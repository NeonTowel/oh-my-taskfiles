version: '3'

tasks:
  coreutils:install:
    desc: "[WINDOWS] ✨ Install coreutils"
    cmds:
      - |
        if [ ! -d "$HOME/scoop/apps/coreutils/current" ]; then
          scoop install coreutils
          echo "coreutils has been installed successfully."
        else
          echo "coreutils is already installed."
        fi

  1password:install:
    desc: "[WINDOWS] ✨ Install 1Password"
    cmds:
      - |
        app=$(winget list "AgileBits.1Password" -e)
        if [[ "$app" == *"No installed package found matching input criteria."* ]]; then
          winget install --id AgileBits.1Password -e --accept-package-agreements --accept-source-agreements
          echo "1Password has been installed successfully."
        else
          echo "1Password is already installed."
        fi

  pwsh:install:
    desc: "[WINDOWS] ✨ Install pwsh"
    cmds:
      - |
        if command -v pwsh >/dev/null 2>&1; then
          echo "pwsh is already installed."
        else
          scoop install pwsh
          echo "pwsh has been installed successfully."
        fi
